good_night:
  alias: "[House] Good Night"
  sequence:
    - data:
        entity_id: remote.harmony_hub
      service: remote.turn_off
    - data:
        entity_id: group.dnd_bedrooms
      service: homeassistant.turn_on
    - data:
        entity_id: input_boolean.sarah_good_night_pressed
      service: input_boolean.turn_off
    - data:
        entity_id: input_boolean.bruno_good_night_pressed
      service: input_boolean.turn_off
    - data:
        entity_id: group.presence_bedrooms
      service: homeassistant.turn_on
    - data:
        entity_id: group.sleeping_bedrooms
      service: homeassistant.turn_on
    - data:
        entity_id: group.presence_other_rooms
      service: homeassistant.turn_off
    - data:
        entity_id: group.presence_living_room
      service: homeassistant.turn_off
    - data:
        entity_id: group.all_lights
      service: homeassistant.turn_off
    - data:
        entity_id: group.all_light_switches
      service: homeassistant.turn_off
    - data:
        brightness: 30
        entity_id: light.emmas_bedroom_nightlight
        rgb_color:
          - 255
          - 30
          - 30
      service: light.turn_on
    - data:
        entity_id: group.all_covers
      service: cover.close_cover
    - data:
        entity_id: lock.home_door
      service: lock.lock
    - data:
        entity_id:
          - media_player.everywhere
          - media_player.emma_s_bedroom_echo_dot
        volume_level: 0.2
      service: media_player.volume_set

house_wake_up:
  alias: "[House] Wake Up"
  sequence:
    - data:
        entity_id:
          - media_player.everywhere
          - media_player.emma_s_bedroom_echo_dot
        volume_level: 0.4
      service: media_player.volume_set
    - data_template:
        kelvin: "{{ state_attr('sensor.circadian_values', 'colortemp') | int }}"
        brightness_pct: 1
        entity_id:
          - light.master_bedroom
          - light.emmas_bedroom
      service: light.turn_on
    - data_template:
        kelvin: "{{ state_attr('sensor.circadian_values', 'colortemp') | int }}"
        brightness_pct: "{{ state_attr('switch.circadian_lighting_master_bedroom', 'brightness') | int }}"
        entity_id:
          - light.master_bedroom
          - light.emmas_bedroom
        transition: 120
      service: light.turn_on
    - delay:
        seconds: 130
    - data:
        entity_id: group.dnd_house
      service: homeassistant.turn_off
    - data:
        entity_id: group.sleeping_bedrooms
      service: homeassistant.turn_off
    - delay:
        minutes: 45
    - data:
        entity_id: group.presence_bedrooms
      service: homeassistant.turn_off

house_wake_up_no_delay:
  alias: "[House] Wake Up (No Delay)"
  sequence:
    - data:
        entity_id:
          - media_player.everywhere
          - media_player.emma_s_bedroom_echo_dot
        volume_level: 0.4
      service: media_player.volume_set
    - data:
        entity_id: group.dnd_house
      service: homeassistant.turn_off
    - data:
        entity_id: group.sleeping_bedrooms
      service: homeassistant.turn_off
    - data:
        entity_id: group.presence_bedrooms
      service: homeassistant.turn_off

house_nobody_home:
  alias: "[House] Nobody Home"
  sequence:
    - data:
        entity_id: group.all_lights
      service: homeassistant.turn_off
    - data:
        entity_id: group.all_light_switches
      service: homeassistant.turn_off
    - data:
        entity_id: remote.harmony_hub
      service: remote.turn_off
    - data:
        entity_id: lock.home_door
      service: lock.lock
    - data:
        entity_id: group.all_covers
      service: cover.close_cover
    - data:
        entity_id: group.presence_other_rooms
      service: homeassistant.turn_off
    - data:
        entity_id: group.presence_bedrooms
      service: homeassistant.turn_off

house_start_cleaning:
  alias: "[House] Start Cleaning"
  sequence:
    - data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
      service: vacuum.start

house_stop_cleaning:
  alias: "[House] Stop Cleaning"
  sequence:
    - data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
      service: vacuum.return_to_base
